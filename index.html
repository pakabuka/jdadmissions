<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T14 Law School Admissions Predictor</title>
    <link href="https://fonts.googleapis.com/css2?family=Spectral:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Spectral', serif;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            background-color: #f0f4f8;
            color: #333;
        }
        .container {
            background-color: #ffffff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            max-width: 100%;
            width: 100%;
            margin-bottom: 20px;
            box-sizing: border-box;
        }
        h1 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 24px;
            color: #003366;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #003366;
        }
        input[type="text"],
        input[type="number"],
        select {
            width: calc(100% - 24px);
            padding: 12px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-sizing: border-box;
            font-size: 14px;
        }
        button {
            width: 100%;
            padding: 12px;
            background-color: #003366;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }
        button:hover {
            background-color: #001f4d;
        }
        .result {
            text-align: center;
            margin-top: 20px;
            font-size: 18px;
            color: #003366;
        }
        .disclaimer {
            margin-top: 20px;
            font-size: 12px;
            color: #777;
            text-align: center;
        }
        .explanation {
            font-size: 14px;
            color: #555;
            margin-top: 10px;
        }
        .color-explanation {
            margin-top: 20px;
            font-size: 14px;
            color: #555;
        }
        .color-box {
            display: inline-block;
            width: 20px;
            height: 20px;
            margin-right: 8px;
            border-radius: 3px;
        }
        .green { background-color: green; }
        .yellow { background-color: yellow; }
        .orange { background-color: orange; }
        .red { background-color: red; }
        a {
            color: #003366;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            cursor: pointer;
            background-color: #f2f2f2;
            color: #003366;
        }
        th:hover {
            background-color: #ddd;
        }
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: pointer;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 640px;
            background-color: #555;
            color: #fff;
            text-align: left;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 150%; /* Position above the icon */
            left: 50%;
            margin-left: -320px; /* Center the tooltip */
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
            display: flex;
            justify-content: space-between;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        .tooltip ul {
            list-style-type: none;
            padding: 0;
            margin: 0 10px;
        }
        .tooltip h3 {
            margin-top: 0;
        }

        @media (min-width: 600px) {
            .container {
                max-width: 600px;
                padding: 30px;
            }
            h1 {
                font-size: 32px;
            }
            input[type="text"],
            input[type="number"],
            select {
                width: calc(100% - 20px);
                font-size: 16px;
            }
            button {
                font-size: 18px;
            }
            .result {
                font-size: 20px;
            }
            .explanation {
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>T14 Law School Admissions Predictor</h1>

        <label for="lsat">LSAT Score:</label>
        <input type="number" id="lsat" min="120" max="180" required>

        <label for="gpa">GPA:</label>
        <input type="number" step="0.01" id="gpa" min="0" max="4.33" required>

        <label for="international">International Student:</label>
        <select id="international">
            <option value="0">No</option>
            <option value="1">Yes</option>
        </select>

        <label for="urm">Under-Represented Minority (URM):</label>
        <select id="urm">
            <option value="0">No</option>
            <option value="1">Yes</option>
        </select>

        <label for="softs">Softs:
            <span class="tooltip">?
                <span class="tooltiptext">
                    <div>
                        <h3>Super</h3>
                        <ul>
                            <li>High valor decorations: Medal of Honor, DSC/Navy Cross, Silver Star</li>
                            <li>Prestigious scholarships: Rhodes, Fulbright, Schwarzman</li>
                            <li>Founded multimillion-dollar company</li>
                            <li>C-level executive in Fortune 500 company</li>
                            <li>Professional/NCAA standout athlete</li>
                            <li>Widely published or highly cited author/academic</li>
                            <li>Innovative expert (invented technique, holds patents)</li>
                            <li>Overcame extraordinary physical/mental handicap</li>
                        </ul>
                    </div>
                    <div>
                        <h3>Average</h3>
                        <ul>
                            <li>Any military service</li>
                            <li>Prestigious undergrad scholarships/research awards</li>
                            <li>NCAA athlete</li>
                            <li>Overcame significant adversity</li>
                            <li>Published academic</li>
                            <li>Public service: Peace Corps, AmeriCorps</li>
                            <li>Relevant prior employment: legal, engineering, etc.</li>
                            <li>Legal and congressional internships</li>
                            <li>Leadership roles in clubs/fraternities</li>
                            <li>Involved in school newspaper/yearbook</li>
                            <li>Honors societies member</li>
                            <li>Disadvantaged status: LGBTQ+, first-generation college, single parent</li>
                        </ul>
                    </div>
                </span>
            </span>
        </label>
        <select id="softs">
            <option value="0">Average</option>
            <option value="1">Super</option>
        </select>

        <button onclick="calculateProbability()">Calculate Probability</button>
        <div class="result" id="result"></div>
    </div>

    <div class="container color-explanation">
        <h2>Color Explanation</h2>
        <p><span class="color-box green"></span>Green: Safe School</p>
        <p><span class="color-box yellow"></span>Yellow: Target School</p>
        <p><span class="color-box orange"></span>Orange: Reach School</p>
        <p><span class="color-box red"></span>Red: Super-Reach School</p>
    </div>
    
    <div class="container explanation">
        <h2>Explanation of Model Performance Metrics</h2>
        <p><strong>Accuracy:</strong> The proportion of correctly classified instances. It is a measure of how often the model is correct. A higher accuracy indicates a better model.</p>
        <p><strong>AUC (Area Under the Curve):</strong> The area under the ROC (Receiver Operating Characteristic) curve. It measures the ability of the model to distinguish between positive and negative classes. An AUC of 0.5 indicates no discriminative power, while an AUC of 1.0 indicates perfect classification.</p>
        <p><strong>Interpreting AUC:</strong></p>
        <ul>
            <li>0.5 &lt; AUC &lt; 0.7: Poor model performance.</li>
            <li>0.7 &le; AUC &lt; 0.8: Fair performance.</li>
            <li>0.8 &le; AUC &lt; 0.9: Good performance.</li>
            <li>0.9 &le; AUC &lt; 1.0: Excellent performance.</li>
        </ul>
    </div>

    <div class="disclaimer">
        <!-- <br>
        Please note that the estimated chances do not indicate that you personally have a specific percentage chance (e.g., 50%) <br>
        of getting into a particular school. Instead, they reflect statistical data showing that a certain percentage (e.g., 50%) <br>
        of past applicants who had the same GPA and LSAT scores (or other similar qualifications) as you were accepted into that school.<br>
        <br> -->
        Data source: <a href="https://www.lsd.law/download" target="_blank">https://www.lsd.law/download</a><br>
        Models were built based on data from the 2019-2023 cycles.<br>
        Developed by Frederick Liu. Last updated: 5/30/2024.
    </div>

    <script>
        function calculateProbability() {
            const lsat = parseFloat(document.getElementById('lsat').value);
            const gpa = parseFloat(document.getElementById('gpa').value);
            const international = parseInt(document.getElementById('international').value);
            const urm = parseInt(document.getElementById('urm').value);
            const softs = parseInt(document.getElementById('softs').value);

            if (isNaN(lsat) || isNaN(gpa)) {
                alert("Please enter both LSAT and GPA values.");
                return;
            }

            if (lsat > 180 || lsat < 120) {
                alert("LSAT score must be between 120 and 180.");
                return;
            }

            if (gpa > 4.33 || gpa < 0) {
                alert("GPA must be between 0 and 4.33.");
                return;
            }

            const schools = {
                yale: { name: "Yale University", beta_lsat: 0.283, beta_gpa: 7.100, beta_international: -1.093, beta_urm: 2.124, beta_softs: 1.823, beta_0: -79.430, accuracy: 91.36, auc: 91.57 },
                stanford: { name: "Stanford University", beta_lsat: 0.256, beta_gpa: 6.353, beta_international: -0.436, beta_urm: 2.342, beta_softs: 1.461, beta_0: -70.822, accuracy: 85.06, auc: 90.92 },
                harvard: { name: "Harvard University", beta_lsat: 0.252, beta_gpa: 5.773, beta_international: -1.210, beta_urm: 1.167, beta_softs: 0.913, beta_0: -67.487, accuracy: 85.09, auc: 83.45 },
                chicago: { name: "University of Chicago", beta_lsat: 0.345, beta_gpa: 8.817, beta_international: -1.878, beta_urm: 3.269, beta_softs: 0.249, beta_0: -93.612, accuracy: 89.96, auc: 94.74 },
                columbia: { name: "Columbia University", beta_lsat: 0.369, beta_gpa: 9.997, beta_international: -0.524, beta_urm: 2.944, beta_softs: 0.486, beta_0: -101.629, accuracy: 88.48, auc: 94.82 },
                penn: { name: "University of Pennsylvania", beta_lsat: 0.355, beta_gpa: 5.710, beta_international: -1.741, beta_urm: 2.002, beta_softs: 0.623, beta_0: -82.850, accuracy: 83.99, auc: 90.71 },
                nyu: { name: "New York University", beta_lsat: 0.427, beta_gpa: 9.471, beta_international: -1.496, beta_urm: 2.287, beta_softs: 0.567, beta_0: -109.166, accuracy: 89.38, auc: 95.65 },
                duke: { name: "Duke University", beta_lsat: 0.368, beta_gpa: 7.386, beta_international: -0.986, beta_urm: 1.853, beta_softs: 0.598, beta_0: -90.835, accuracy: 84.89, auc: 89.58 },
                berk: { name: "University of California, Berkeley", beta_lsat: 0.246, beta_gpa: 5.595, beta_international: -1.172, beta_urm: 1.203, beta_softs: 0.897, beta_0: -63.885, accuracy: 78.78, auc: 87.58 },
                virginia: { name: "University of Virginia", beta_lsat: 0.250, beta_gpa: 4.109, beta_international: -2.467, beta_urm: 1.740, beta_softs: 0.229, beta_0: -58.315, accuracy: 82.96, auc: 87.92 },
                michigan: { name: "University of Michigan", beta_lsat: 0.196, beta_gpa: 3.164, beta_international: -3.057, beta_urm: 1.850, beta_softs: 0.523, beta_0: -45.699, accuracy: 74.02, auc: 81.88 },
                northwestern: { name: "Northwestern University", beta_lsat: 0.426, beta_gpa: 5.721, beta_international: -1.064, beta_urm: 2.762, beta_softs: 0.382, beta_0: -93.871, accuracy: 84.21, auc: 92.62 },
                cornell: { name: "Cornell University", beta_lsat: 0.396, beta_gpa: 5.892, beta_international: 0.158, beta_urm: 2.280, beta_softs: -0.240, beta_0: -90.377, accuracy: 88.82, auc: 92.25 },
                georgetown: { name: "Georgetown University", beta_lsat: 0.479, beta_gpa: 6.429, beta_international: -0.342, beta_urm: 2.572, beta_softs: 1.619, beta_0: -104.983, accuracy: 86.64, auc: 94.55 }
            };

            let results = [];

            for (const [school, params] of Object.entries(schools)) {
                const logit_p = params.beta_0 + (params.beta_lsat * lsat) + (params.beta_gpa * gpa) +
                                (params.beta_international * international) + (params.beta_urm * urm) +
                                (params.beta_softs * softs);

                const probability = 1 / (1 + Math.exp(-logit_p));

                results.push({ school: params.name, probability: Math.round(probability * 100), accuracy: Math.round(params.accuracy), auc: Math.round(params.auc) });
            }

            displayResults(results);
        }

        function displayResults(results) {
            let resultHTML = '<h3>Results</h3>';
            resultHTML += '<table><tr><th onclick="sortTable(0)">School</th><th onclick="sortTable(1)">Probability</th><th onclick="sortTable(2)">Accuracy</th><th onclick="sortTable(3)">AUC</th></tr>';

            results.forEach(result => {
                const probability = result.probability;
                let color = '';

                if (probability > 70) {
                    color = 'green';
                } else if (probability >= 40 && probability <= 70) {
                    color = 'yellow';
                } else if (probability >= 20 && probability < 40) {
                    color = 'orange';
                } else {
                    color = 'red';
                }

                resultHTML += `<tr><td>${result.school}</td>
                               <td style="background-color: ${color};">${result.probability}%</td>
                               <td>${result.accuracy}%</td>
                               <td>${result.auc}%</td></tr>`;
            });

            resultHTML += '</table>';
            document.getElementById('result').innerHTML = resultHTML;
        }

        function sortTable(columnIndex) {
            const table = document.querySelector('table');
            const rows = Array.from(table.rows).slice(1);

            let sortedRows;
            if (columnIndex === 1 || columnIndex === 2 || columnIndex === 3) { // Sort by Probability, Accuracy, or AUC
                sortedRows = rows.sort((a, b) => parseFloat(a.cells[columnIndex].innerText.replace('', '')) - parseFloat(b.cells[columnIndex].innerText.replace('', '')));
            } else {
                sortedRows = rows.sort((a, b) => a.cells[columnIndex].innerText.localeCompare(b.cells[columnIndex].innerText));
            }

            if (this.sorted && this.sorted.columnIndex === columnIndex) {
                sortedRows.reverse();
                this.sorted.ascending = !this.sorted.ascending;
            } else {
                this.sorted = { columnIndex, ascending: true };
            }

            table.tBodies[0].append(...sortedRows);
        }
    </script>
</body>
</html>
